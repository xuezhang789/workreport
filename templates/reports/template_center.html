{% extends "base_topbar.html" %}
{% block title %}æ¨¡æ¿ä¸­å¿ƒ / Template Center{% endblock %}
{% block nav_header %}{% include "partials/nav.html" with nav_title="æ¨¡æ¿ä¸­å¿ƒ / Template Center" nav_subtitle="æŒ‰è§’è‰²ä¸é¡¹ç›®å…±äº«æ—¥æŠ¥ä¸ä»»åŠ¡æ¨¡æ¿ / Share report & task templates by role/project" %}{% endblock %}
{% block content %}
<div class="container" style="max-width:1100px;">
    <section style="margin:24px 0;padding:18px 20px;border:1px solid #e2e8f0;border-radius:14px;background:#f8fafc;">
        <h1 style="margin:0 0 8px 0;font-size:20px;font-weight:800;">æ¨¡æ¿åˆ›å»º / Create template</h1>
        <p style="margin:0 0 14px 0;color:#475569;">æ”¯æŒé¡¹ç›®/è§’è‰²çš„å…±äº«æ¨¡æ¿ï¼Œå¹¶è‡ªåŠ¨è®°å½•ç‰ˆæœ¬ã€‚åŒè¯­æ–‡æ¡ˆ / Bilingual copy.</p>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px;">
            <form method="post" action="" class="card" style="padding:14px;border:1px solid #e2e8f0;border-radius:12px;background:#fff;">
                {% csrf_token %}
                <input type="hidden" name="action" value="report">
                <h3 style="margin:0 0 10px 0;">æ—¥æŠ¥æ¨¡æ¿ / Report template</h3>
                {{ report_form.as_p }}
                <button type="submit" class="btn btn-primary" style="margin-top:8px;">ä¿å­˜æ—¥æŠ¥æ¨¡æ¿ / Save report template</button>
            </form>
            <form method="post" action="" class="card" style="padding:14px;border:1px solid #e2e8f0;border-radius:12px;background:#fff;">
                {% csrf_token %}
                <input type="hidden" name="action" value="task">
                <h3 style="margin:0 0 10px 0;">ä»»åŠ¡æ¨¡æ¿ / Task template</h3>
                {{ task_form.as_p }}
                <button type="submit" class="btn btn-primary" style="margin-top:8px;">ä¿å­˜ä»»åŠ¡æ¨¡æ¿ / Save task template</button>
            </form>
        </div>
    </section>

    <section style="margin:24px 0;padding:18px 20px;border:1px solid #e2e8f0;border-radius:14px;background:#fff;">
        <h2 style="margin:0 0 12px 0;">æœ€æ–°æ¨¡æ¿ / Latest versions</h2>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:12px;">
            {% for tmpl in report_templates %}
            <article style="padding:12px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;">
                <div style="font-weight:700;">ğŸ“„ {{ tmpl.name }}</div>
                <div style="font-size:12px;color:#475569;">è§’è‰² / Role: {{ tmpl.get_role_display|default:"å…¨éƒ¨ / All" }} Â· é¡¹ç›® / Project: {{ tmpl.project.name|default:"å…¨å±€ / Global" }}</div>
                <div style="font-size:12px;color:#475569;">ç‰ˆæœ¬ / Version: v{{ tmpl.version }}</div>
                <div style="margin-top:6px;font-size:12px;color:#64748b;">{{ tmpl.content|truncatechars:120 }}</div>
            </article>
            {% empty %}
            <div style="color:#94a3b8;">æš‚æ— æ—¥æŠ¥æ¨¡æ¿ / No report template</div>
            {% endfor %}
        </div>
        <h3 style="margin:16px 0 10px 0;">ä»»åŠ¡æ¨¡æ¿ / Task templates</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:12px;">
            {% for tmpl in task_templates %}
            <article style="padding:12px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;">
                <div style="font-weight:700;">âœ… {{ tmpl.name }}</div>
                <div style="font-size:12px;color:#475569;">è§’è‰² / Role: {{ tmpl.get_role_display|default:"å…¨éƒ¨ / All" }} Â· é¡¹ç›® / Project: {{ tmpl.project.name|default:"å…¨å±€ / Global" }}</div>
                <div style="font-size:12px;color:#475569;">ç‰ˆæœ¬ / Version: v{{ tmpl.version }}</div>
                <div style="margin-top:6px;font-size:12px;color:#64748b;">{{ tmpl.title }} â€” {{ tmpl.content|truncatechars:120 }}</div>
            </article>
            {% empty %}
            <div style="color:#94a3b8;">æš‚æ— ä»»åŠ¡æ¨¡æ¿ / No task template</div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
