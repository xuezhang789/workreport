Creating test database for alias 'default'...
..F......F.................
======================================================================
FAIL: test_stats_queries (workreport.tests.test_optimization.OptimizationTest.test_stats_queries)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/arlo/Downloads/workreport/tests/test_optimization.py", line 40, in test_stats_queries
    self.assertEqual(response.status_code, 200)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 404 != 200

======================================================================
FAIL: test_project_detail_shows_tasks (workreport.tests.test_project_detail_tasks.ProjectDetailTaskTest.test_project_detail_shows_tasks)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/arlo/Downloads/workreport/tests/test_project_detail_tasks.py", line 42, in test_project_detail_shows_tasks
    self.assertContains(response, '项目任务 / Project Tasks')
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: False is not true : Couldn't find '项目任务 / Project Tasks' in the following response
b'<!DOCTYPE html>\n<html lang="zh-CN">\n\n<head>\n    <meta charset="UTF-8">\n    <title>\xe9\xa1\xb9\xe7\x9b\xae\xe8\xaf\xa6\xe6\x83\x85 / Project Detail</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Noto+Sans+SC:wght@400;500;600&display=swap" rel="stylesheet">\n    <style>\n        :root {\n            --bg: #f8fafc;\n            --panel: #ffffff;\n            --card: #ffffff;\n            --ink: #1e293b;\n            --muted: #64748b;\n            --primary: #3b82f6;\n            --primary-2: #06b6d4;\n            --accent: #f59e0b;\n            --success: #10b981;\n            --border: #e2e8f0;\n            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n            --radius-lg: 20px;\n            --radius-md: 14px;\n            --radius-sm: 10px;\n        }\n        * { box-sizing: border-box; }\n        body {\n            margin: 0;\n            font-family: \'Space Grotesk\', \'Noto Sans SC\', \'SF Pro Display\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;\n            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 25%, #f0fdf4 50%, #fef3c7 75%, #fef2f2 100%);\n            background-attachment: fixed;\n            color: var(--ink);\n            min-height: 100vh;\n        }\n        .page { position: relative; min-height: 100vh; overflow: hidden; }\n        .page::after {\n            content: \'\';\n            position: absolute;\n            inset: 0;\n            background: radial-gradient(circle at 40% 0%, rgba(255, 255, 255, 0.6), transparent 25%),\n                        radial-gradient(circle at 70% 20%, rgba(37, 99, 235, 0.08), transparent 30%);\n            pointer-events: none;\n            z-index: 0;\n        }\n        .content { position: relative; z-index: 1; padding: 18px clamp(16px, 4vw, 32px) 36px; max-width: 1240px; margin: 0 auto; }\n        .topbar {\n            position: sticky;\n            top: 0;\n            z-index: 5;\n            backdrop-filter: blur(20px);\n            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 250, 252, 0.95));\n            border-bottom: 1px solid rgba(59, 130, 246, 0.15);\n            padding: 16px clamp(20px, 4vw, 40px);\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            gap: 20px;\n            flex-wrap: wrap;\n            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.12);\n            border-radius: 0 0 24px 24px;\n            margin-bottom: 8px;\n            position: relative;\n            overflow: hidden;\n        }\n\n        .topbar::before {\n            content: \'\';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 3px;\n            background: linear-gradient(90deg, var(--primary), var(--primary-2), var(--accent));\n            opacity: 0.8;\n        }\n\n        .topbar::after {\n            content: \'\';\n            position: absolute;\n            top: -30%;\n            right: -5%;\n            width: 300px;\n            height: 300px;\n            background: radial-gradient(circle, rgba(59, 130, 246, 0.06) 0%, transparent 70%);\n            border-radius: 50%;\n            animation: float 8s ease-in-out infinite;\n            pointer-events: none;\n        }\n        .brand { \n            display: flex; \n            align-items: center; \n            gap: 16px; \n            position: relative;\n            z-index: 1;\n        }\n        .brand-mark {\n            width: 48px; height: 48px;\n            border-radius: 16px;\n            background: linear-gradient(135deg, var(--primary), var(--primary-2));\n            color: #fff;\n            display: grid; place-items: center;\n            font-weight: 700; letter-spacing: 0.04em;\n            font-size: 16px;\n            box-shadow: 0 12px 24px rgba(59, 130, 246, 0.35);\n            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n            position: relative;\n            overflow: hidden;\n        }\n        .brand-mark::before {\n            content: \'\';\n            position: absolute;\n            top: -50%;\n            left: -50%;\n            width: 200%;\n            height: 200%;\n            background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.4), transparent);\n            animation: rotate 4s linear infinite;\n        }\n        @keyframes rotate {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n        @keyframes float {\n            0%, 100% { transform: translateY(0px); }\n            50% { transform: translateY(-10px); }\n        }\n        .brand-mark:hover {\n            transform: scale(1.08) rotate(8deg);\n            box-shadow: 0 16px 32px rgba(59, 130, 246, 0.45);\n        }\n        .brand-title { \n            font-weight: 700; \n            font-size: 20px; \n            line-height: 1.2;\n            background: linear-gradient(135deg, var(--ink), var(--primary));\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            background-clip: text;\n        }\n        .brand-sub { \n            color: var(--muted); \n            font-size: 13px;\n            margin-top: 2px;\n            font-weight: 500;\n        }\n        .actions { \n            display: flex; \n            gap: 12px; \n            align-items: center; \n            flex-wrap: wrap; \n            margin-top: 6px;\n            position: relative;\n            z-index: 1;\n        }\n        .nav-toggle {\n            display: none;\n            border: 1px solid rgba(59, 130, 246, 0.2);\n            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.8));\n            backdrop-filter: blur(10px);\n            border-radius: 14px;\n            padding: 10px 14px;\n            font-size: 14px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);\n        }\n        .nav-toggle:hover {\n            background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(6, 182, 212, 0.08));\n            border-color: rgba(59, 130, 246, 0.3);\n            transform: translateY(-1px);\n            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.15);\n        }\n        .nav-toggle:active { \n            transform: translateY(0px) scale(0.98); \n            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\n        }\n        .pill, .ghost-link {\n            text-decoration: none;\n            font-weight: 600;\n            border-radius: 999px;\n            padding: 10px 16px;\n            font-size: 13px;\n            border: 1px solid transparent;\n            position: relative;\n            overflow: hidden;\n            backdrop-filter: blur(10px);\n            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        .pill {\n            background: linear-gradient(135deg, var(--primary), var(--primary-2));\n            color: #fff;\n            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.35);\n            position: relative;\n        }\n        .pill::before {\n            content: \'\';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n            transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        .pill:hover::before {\n            left: 100%;\n        }\n        .pill:hover {\n            transform: translateY(-3px) scale(1.05);\n            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.45);\n        }\n        .ghost-link {\n            color: var(--ink);\n            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.7));\n            border-color: rgba(59, 130, 246, 0.2);\n            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.08);\n        }\n        .ghost-link::before {\n            content: \'\';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);\n            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        .ghost-link:hover::before {\n            left: 100%;\n        }\n        .ghost-link:hover {\n            background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(6, 182, 212, 0.12));\n            border-color: rgba(59, 130, 246, 0.3);\n            transform: translateY(-2px) scale(1.02);\n            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);\n        }\n        .ghost-link.active {\n            background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(6, 182, 212, 0.15));\n            border-color: rgba(37, 99, 235, 0.4);\n            color: var(--primary);\n            box-shadow: 0 6px 18px rgba(37, 99, 235, 0.25);\n            font-weight: 700;\n        }\n        .chip {\n            display: inline-flex; align-items: center; gap: 6px;\n            padding: 7px 10px;\n            border-radius: 12px;\n            border: 1px dashed rgba(15, 23, 42, 0.12);\n            background: rgba(15, 23, 42, 0.02);\n            font-size: 12px; color: var(--muted);\n        }\n        .flash-stack { display:grid; gap:8px; margin-bottom:12px; }\n        .flash { \n            padding:12px 16px; \n            border-radius:14px; \n            font-size:12px; \n            border:1px solid var(--border); \n            box-shadow:0 8px 20px rgba(59,130,246,0.1);\n            backdrop-filter: blur(8px);\n            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            position: relative;\n            overflow: hidden;\n        }\n        .flash::before {\n            content: \'\';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n            transition: left 0.6s ease;\n        }\n        .flash:hover::before {\n            left: 100%;\n        }\n        .flash:hover {\n            transform: translateY(-1px) scale(1.01);\n            box-shadow:0 12px 28px rgba(59,130,246,0.15);\n        }\n        .flash-success { background: rgba(16,185,129,0.12); color:#065f46; border-color: rgba(16,185,129,0.35); }\n        .flash-error { background: rgba(239,68,68,0.12); color:#991b1b; border-color: rgba(239,68,68,0.35); }\n        .flash-info { background: rgba(59,130,246,0.12); color:#1d4ed8; border-color: rgba(59,130,246,0.35); }\n        @media (max-width: 860px) {\n            .topbar { \n                align-items: flex-start; \n                padding: 14px clamp(16px, 4vw, 24px);\n                border-radius: 0 0 20px 20px;\n            }\n            .nav-toggle { display: inline-flex; }\n            .actions {\n                display: none;\n                width: 100%;\n                flex-direction: column;\n                align-items: stretch;\n                gap: 10px;\n                margin-top: 12px;\n                padding-top: 12px;\n                border-top: 1px solid rgba(59, 130, 246, 0.1);\n            }\n            .actions.open { display: flex; }\n            .ghost-link, .pill { \n                width: 100%; \n                text-align: center; \n                justify-content: center;\n                padding: 12px 16px;\n            }\n            .brand {\n                gap: 12px;\n            }\n            .brand-mark {\n                width: 40px;\n                height: 40px;\n                font-size: 14px;\n            }\n            .brand-title {\n                font-size: 16px;\n            }\n            .brand-sub {\n                font-size: 11px;\n            }\n        }\n        \n<style>\n    /* --- Design System (Consistent with Admin Pages) --- */\n    :root {\n        --primary: #2563eb;\n        --primary-hover: #1e40af;\n        --text-main: #1e293b;\n        --text-secondary: #64748b;\n        --border-color: #e2e8f0;\n        --bg-page: #f8fafc;\n        --radius-lg: 16px;\n    }\n\n    .page-container {\n        max-width: 1200px;\n        margin: 0 auto;\n        padding: 24px;\n    }\n\n    /* Info Card & Layout */\n    .card {\n        background: #ffffff;\n        border: 1px solid var(--border-color);\n        border-radius: var(--radius-lg);\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);\n        padding: 24px;\n        margin-bottom: 24px;\n    }\n\n    .card-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 20px;\n        padding-bottom: 16px;\n        border-bottom: 1px solid var(--border-color);\n    }\n\n    .card-title {\n        font-size: 18px;\n        font-weight: 700;\n        color: var(--text-main);\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n\n    .info-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 24px;\n        margin-bottom: 24px;\n    }\n\n    .info-item {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n    }\n\n    .info-label {\n        font-size: 12px;\n        color: var(--text-secondary);\n        font-weight: 600;\n        text-transform: uppercase;\n        letter-spacing: 0.02em;\n    }\n\n    .info-value {\n        font-size: 15px;\n        color: var(--text-main);\n        font-weight: 500;\n    }\n\n    /* Buttons */\n    .btn {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 8px 16px;\n        border-radius: 8px;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n        text-decoration: none;\n        transition: all 0.2s;\n        border: 1px solid transparent;\n        line-height: 1.5;\n    }\n\n    .btn-primary {\n        background: var(--primary);\n        color: white;\n    }\n\n    .btn-primary:hover {\n        background-color: var(--primary-hover);\n        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);\n        transform: translateY(-1px);\n    }\n\n    .btn-ghost {\n        background: transparent;\n        color: var(--text-secondary);\n    }\n\n    .btn-ghost:hover {\n        background: rgba(0,0,0,0.05);\n        color: var(--text-main);\n    }\n\n    /* Phase & Progress */\n    .progress-track {\n        height: 8px;\n        background: #f1f5f9;\n        border-radius: 4px;\n        overflow: hidden;\n        margin-top: 8px;\n    }\n\n    .progress-fill {\n        height: 100%;\n        background: linear-gradient(90deg, var(--primary), #60a5fa);\n        border-radius: 4px;\n        transition: width 0.6s ease;\n    }\n\n    /* Tables */\n    .table-container {\n        overflow-x: auto;\n    }\n\n    .table {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 14px;\n    }\n\n    .table th {\n        text-align: left;\n        padding: 12px 16px;\n        color: var(--text-secondary);\n        font-weight: 600;\n        background: #f8fafc;\n        border-bottom: 1px solid var(--border-color);\n        white-space: nowrap;\n    }\n\n    .table td {\n        padding: 16px;\n        border-bottom: 1px solid #f1f5f9;\n        color: var(--text-main);\n    }\n\n    .table tr:last-child td {\n        border-bottom: none;\n    }\n    \n    .table tr:hover td {\n        background-color: #f8fafc;\n    }\n\n    /* Status Badges */\n    .status-badge {\n        display: inline-flex;\n        align-items: center;\n        padding: 2px 8px;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 500;\n    }\n    \n    .badge-active { background: #dbeafe; color: #1e40af; }\n    .badge-completed { background: #dcfce7; color: #166534; }\n    .badge-overdue { background: #fee2e2; color: #991b1b; }\n    .badge-default { background: #f1f5f9; color: #475569; }\n\n    /* Filters */\n    .filter-select {\n        padding: 6px 12px;\n        border: 1px solid var(--border-color);\n        border-radius: 8px;\n        font-size: 13px;\n        color: var(--text-main);\n        background-color: white;\n        outline: none;\n    }\n    \n    .filter-select:focus {\n        border-color: var(--primary);\n    }\n</style>\n\n    </style>\n</head>\n<body>\n<div class="page">\n    <header class="topbar">\n    <div class="brand">\n        <div class="brand-mark">TM</div>\n        <div>\n            <div class="brand-title">\xe9\xa1\xb9\xe7\x9b\xae\xe8\xaf\xa6\xe6\x83\x85 / Project Detail</div>\n            <div class="brand-sub">\xe6\x9f\xa5\xe7\x9c\x8b\xe9\xa1\xb9\xe7\x9b\xae\xe5\x9f\xba\xe6\x9c\xac\xe4\xbf\xa1\xe6\x81\xaf\xe4\xb8\x8e\xe8\xbf\x91\xe6\x9c\x9f\xe5\x8a\xa8\xe6\x80\x81 / View basics & activities</div>\n        </div>\n    </div>\n    <button class="nav-toggle" id="nav-toggle" aria-label="\xe5\x88\x87\xe6\x8d\xa2\xe8\x8f\x9c\xe5\x8d\x95 / Toggle menu">\xe2\x98\xb0 \xe8\x8f\x9c\xe5\x8d\x95 / Menu</button>\n    <div class="actions" id="nav-actions">\n        <!-- \xe4\xb8\xaa\xe4\xba\xba\xe5\xb7\xa5\xe4\xbd\x9c\xe5\x8f\xb0 - \xe9\xa6\x96\xe9\xa1\xb5\xe6\xa6\x82\xe8\xa7\x88 -->\n        <a class="ghost-link " href="/reports/workbench/">\xe4\xb8\xaa\xe4\xba\xba\xe5\xb7\xa5\xe4\xbd\x9c\xe5\x8f\xb0 / Workbench</a>\n        \n        <!-- \xe6\xa0\xb8\xe5\xbf\x83\xe5\x8a\x9f\xe8\x83\xbd - \xe6\x97\xa5\xe5\xb8\xb8\xe5\xb7\xa5\xe4\xbd\x9c -->\n        <a class="ghost-link " href="/reports/new/">\xe5\xa1\xab\xe5\x86\x99\xe6\x97\xa5\xe6\x8a\xa5 / New Report</a>\n        <a class="ghost-link " href="/reports/my/">\xe6\x88\x91\xe7\x9a\x84\xe6\x97\xa5\xe6\x8a\xa5 / My Reports</a>\n        <a class="ghost-link " href="/reports/tasks/">\xe6\x88\x91\xe7\x9a\x84\xe4\xbb\xbb\xe5\x8a\xa1 / My Tasks</a>\n        \n        <!-- \xe9\xa1\xb9\xe7\x9b\xae\xe7\xae\xa1\xe7\x90\x86 -->\n        <a class="ghost-link " href="/reports/projects/">\xe9\xa1\xb9\xe7\x9b\xae\xe5\x88\x97\xe8\xa1\xa8 / Projects</a>\n        \n        <!-- \xe7\xae\xa1\xe7\x90\x86\xe5\x8a\x9f\xe8\x83\xbd - \xe7\xae\xa1\xe7\x90\x86\xe5\x91\x98\xe4\xb8\x93\xe7\x94\xa8\xef\xbc\x88\xe4\xb8\x8b\xe6\x8b\x89\xe5\x90\x88\xe5\xb9\xb6\xef\xbc\x89 -->\n        \n            \n        \n        \n        <!-- \xe7\x94\xa8\xe6\x88\xb7\xe6\x93\x8d\xe4\xbd\x9c -->\n        \n            <a class="user-center " href="/accounts/settings/">\n                <div class="user-avatar">\n                    U\n                </div>\n                <div class="user-meta">\n                    <div class="user-name">user</div>\n                    <div class="user-sub">\xe4\xb8\xaa\xe4\xba\xba\xe4\xb8\xad\xe5\xbf\x83 \xc2\xb7 Settings</div>\n                </div>\n                <span class="user-chevron" aria-hidden="true">\xe2\x86\x92</span>\n            </a>\n            <a class="pill" href="/accounts/logout/">\xe9\x80\x80\xe5\x87\xba\xe7\x99\xbb\xe5\xbd\x95 / Logout</a>\n        \n    </div>\n</header>\n<script>\n    (function () {\n        const toggle = document.getElementById(\'nav-toggle\');\n        const actions = document.getElementById(\'nav-actions\');\n        const adminToggle = document.getElementById(\'admin-toggle\');\n        const adminMenu = document.getElementById(\'admin-menu\');\n        if (!toggle || !actions) return;\n        toggle.addEventListener(\'click\', () => {\n            actions.classList.toggle(\'open\');\n        });\n\n        if (adminToggle && adminMenu) {\n            adminToggle.addEventListener(\'click\', (e) => {\n                e.stopPropagation();\n                adminMenu.classList.toggle(\'open\');\n            });\n            document.addEventListener(\'click\', () => {\n                adminMenu.classList.remove(\'open\');\n            });\n        }\n    })();\n</script>\n\n<style>\n    .topbar {\n        position: relative;\n        z-index: 40;\n        overflow: visible;\n    }\n    .topbar .actions {\n        overflow: visible;\n    }\n    .admin-dropdown {\n        position: relative;\n        overflow: visible;\n    }\n    .admin-toggle {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n    }\n    .admin-menu {\n        position: absolute;\n        top: 110%;\n        right: 0;\n        min-width: 200px;\n        background: rgba(255,255,255,0.98);\n        border: 1px solid rgba(226,232,240,0.9);\n        border-radius: 10px;\n        box-shadow: 0 12px 30px rgba(15,23,42,0.12);\n        padding: 8px;\n        display: none;\n        z-index: 999;\n    }\n    .admin-menu.open {\n        display: grid;\n        gap: 6px;\n    }\n    .admin-menu a {\n        padding: 8px 10px;\n        border-radius: 8px;\n        color: #0f172a;\n        text-decoration: none;\n        font-size: 13px;\n    }\n    .admin-menu a:hover,\n    .admin-menu a.active {\n        background: rgba(37,99,235,0.08);\n        color: #1d4ed8;\n    }\n    .user-center {\n        display: inline-flex;\n        align-items: center;\n        gap: 10px;\n        padding: 10px 14px;\n        border-radius: 14px;\n        border: 1px solid rgba(59,130,246,0.16);\n        background: linear-gradient(135deg, rgba(255,255,255,0.92), rgba(248,250,252,0.9));\n        box-shadow: 0 8px 20px rgba(59,130,246,0.12);\n        color: #0f172a;\n        text-decoration: none;\n        min-width: 180px;\n        position: relative;\n        overflow: hidden;\n        transition: all 0.3s ease;\n    }\n    .user-center::before {\n        content: \'\';\n        position: absolute;\n        inset: 0;\n        background: linear-gradient(135deg, rgba(59,130,246,0.08), rgba(6,182,212,0.08));\n        opacity: 0;\n        transition: opacity 0.3s ease;\n    }\n    .user-center:hover::before,\n    .user-center.active::before {\n        opacity: 1;\n    }\n    .user-center:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 12px 28px rgba(59,130,246,0.16);\n    }\n    .user-center .user-avatar {\n        width: 38px;\n        height: 38px;\n        border-radius: 12px;\n        background: linear-gradient(135deg, #2563eb, #3b82f6, #06b6d4);\n        color: #fff;\n        display: grid;\n        place-items: center;\n        font-weight: 800;\n        letter-spacing: 0.02em;\n        box-shadow: inset 0 0 0 2px rgba(255,255,255,0.35);\n        position: relative;\n        z-index: 1;\n    }\n    .user-center .user-meta {\n        display: grid;\n        gap: 2px;\n        z-index: 1;\n    }\n    .user-center .user-name {\n        font-weight: 700;\n        font-size: 14px;\n        color: #0f172a;\n    }\n    .user-center .user-sub {\n        font-size: 12px;\n        color: #64748b;\n    }\n    .user-center .user-chevron {\n        margin-left: auto;\n        color: #3b82f6;\n        font-weight: 700;\n        z-index: 1;\n    }\n    @media (max-width: 860px) {\n        .admin-menu {\n            position: static;\n            box-shadow: none;\n            border: 1px dashed rgba(226,232,240,0.9);\n        }\n        .user-center {\n            width: 100%;\n        }\n    }\n</style>\n\n\n    <main class="content">\n        \n        \n<div class="page-container">\n    \n    <!-- Header / Overview -->\n    <div class="card">\n        <div class="card-header">\n            <div>\n                <h1 style="margin: 0; font-size: 24px; font-weight: 700; color: var(--text-main);">Test Project</h1>\n                <div style="display: flex; align-items: center; gap: 12px; margin-top: 8px;">\n                    <span style="font-family: monospace; background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 12px; color: var(--text-secondary);">TP-001</span>\n                    \n                        <span class="status-badge badge-active">\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xb8\xad / Active</span>\n                    \n                </div>\n            </div>\n            <div style="display: flex; gap: 8px;">\n                <a href="/reports/projects/" class="btn btn-ghost">\xe8\xbf\x94\xe5\x9b\x9e\xe5\x88\x97\xe8\xa1\xa8</a>\n                \n                    <a href="/reports/projects/1/edit/" class="btn btn-primary">\xe7\xbc\x96\xe8\xbe\x91\xe9\xa1\xb9\xe7\x9b\xae</a>\n                \n            </div>\n        </div>\n\n        <div class="info-grid">\n            <div class="info-item">\n                <span class="info-label">\xe8\xb4\x9f\xe8\xb4\xa3\xe4\xba\xba / Owner</span>\n                <span class="info-value">\n                    \n                        <div style="display: flex; align-items: center; gap: 8px;">\n                            <div style="width: 24px; height: 24px; background: #e0e7ff; color: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold;">\n                                U\n                            </div>\n                            user\n                        </div>\n                    \n                </span>\n            </div>\n            <div class="info-item">\n                <span class="info-label">\xe6\x97\xb6\xe9\x97\xb4\xe5\x91\xa8\xe6\x9c\x9f / Duration</span>\n                <span class="info-value">\n                    -- \n                    <span style="color: var(--text-secondary); margin: 0 4px;">\xe2\x86\x92</span> \n                    --\n                </span>\n            </div>\n            <div class="info-item">\n                <span class="info-label">\xe6\x88\x90\xe5\x91\x98 / Members</span>\n                <span class="info-value">0 \xe4\xba\xba</span>\n            </div>\n            <div class="info-item">\n                <span class="info-label">SLA \xe9\x85\x8d\xe7\xbd\xae</span>\n                <span class="info-value">\xe5\x85\xa8\xe5\xb1\x80\xe9\x85\x8d\xe7\xbd\xae</span>\n            </div>\n        </div>\n        \n        \n    </div>\n\n    <!-- Phase Management -->\n    <div class="card">\n        <div class="card-header">\n            <div class="card-title">\n                <span>\xf0\x9f\x9a\xa9</span> \xe9\x98\xb6\xe6\xae\xb5\xe4\xb8\x8e\xe8\xbf\x9b\xe5\xba\xa6 / Phase & Progress\n            </div>\n            <a href="/reports/projects/1/phase-history/" class="btn btn-ghost" style="font-size: 12px; padding: 4px 8px;">\xe5\x8f\x98\xe6\x9b\xb4\xe8\xae\xb0\xe5\xbd\x95</a>\n        </div>\n        \n        <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 8px;">\n            <div>\n                <span style="font-size: 16px; font-weight: 600; color: var(--text-main);">Phase 1</span>\n            </div>\n            <span style="font-size: 20px; font-weight: 700; color: var(--primary);">0.00%</span>\n        </div>\n        <div class="progress-track">\n            <div class="progress-fill" style="width: 0.00%;"></div>\n        </div>\n\n        \n            <div style="margin-top: 24px; padding: 16px; background: #f8fafc; border-radius: 12px; display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">\n                <span style="font-size: 13px; font-weight: 600; color: var(--text-main);">\xe5\x8f\x98\xe6\x9b\xb4\xe9\x98\xb6\xe6\xae\xb5:</span>\n                <select id="phase-select" class="filter-select" style="min-width: 200px;">\n                    \n                        <option value="1" selected>\n                            Phase 1 (10%)\n                        </option>\n                    \n                </select>\n                <button id="update-phase-btn" class="btn btn-primary">\xe6\x9b\xb4\xe6\x96\xb0 / Update</button>\n                <span id="update-msg" style="font-size: 12px; margin-left: 8px;"></span>\n            </div>\n        \n    </div>\n\n    <!-- Tasks Module -->\n    <div class="card">\n        <div class="card-header">\n            <div class="card-title">\n                <span>\xf0\x9f\x93\x8b</span> \xe5\x85\xb3\xe8\x81\x94\xe4\xbb\xbb\xe5\x8a\xa1 / Tasks\n            </div>\n            <div style="display: flex; gap: 8px; align-items: center;">\n                <form method="get" style="display: flex; gap: 8px;">\n                    <select name="task_status" class="filter-select" onchange="this.form.submit()">\n                        <option value="">\xe7\x8a\xb6\xe6\x80\x81: \xe5\x85\xa8\xe9\x83\xa8</option>\n                        <option value="active" >\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xb8\xad</option>\n                        \n                            <option value="pending" >\xe6\x9c\xaa\xe5\xbc\x80\xe5\xa7\x8b / Pending</option>\n                        \n                            <option value="in_progress" >\xe8\xbf\x9b\xe8\xa1\x8c\xe4\xb8\xad / In Progress</option>\n                        \n                            <option value="on_hold" >\xe6\x8c\x82\xe8\xb5\xb7 / On Hold</option>\n                        \n                            <option value="completed" >\xe5\xb7\xb2\xe5\xae\x8c\xe6\x88\x90 / Completed</option>\n                        \n                            <option value="overdue" >\xe9\x80\xbe\xe6\x9c\x9f / Overdue</option>\n                        \n                            <option value="reopened" >\xe9\x87\x8d\xe6\x96\xb0\xe6\x89\x93\xe5\xbc\x80 / Reopened</option>\n                        \n                    </select>\n                </form>\n                \n                    <a href="/reports/tasks/admin/new/?project_id=1" class="btn btn-primary">+ \xe6\x96\xb0\xe5\xbb\xba\xe4\xbb\xbb\xe5\x8a\xa1</a>\n                \n            </div>\n        </div>\n\n        \n            <div class="table-container">\n                <table class="table">\n                    <thead>\n                        <tr>\n                            <th>\xe4\xbb\xbb\xe5\x8a\xa1\xe6\xa0\x87\xe9\xa2\x98</th>\n                            <th>\xe8\xb4\x9f\xe8\xb4\xa3\xe4\xba\xba</th>\n                            <th>\xe6\x88\xaa\xe6\xad\xa2\xe6\x97\xa5\xe6\x9c\x9f</th>\n                            <th>\xe7\x8a\xb6\xe6\x80\x81</th>\n                            <th style="text-align: right;">\xe6\x93\x8d\xe4\xbd\x9c</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        \n                            <tr>\n                                <td>\n                                    <div style="display: flex; flex-direction: column; gap: 2px;">\n                                        <a href="/reports/tasks/2/view/" style="color: var(--text-main); font-weight: 500; text-decoration: none;">Task 2</a>\n                                        \n                                    </div>\n                                </td>\n                                <td>\n                                    \n                                        <div style="display: flex; align-items: center; gap: 8px;">\n                                            <div style="width: 24px; height: 24px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px;">\n                                                U\n                                            </div>\n                                            <span style="font-size: 13px;">user</span>\n                                        </div>\n                                    \n                                </td>\n                                <td>\n                                    --\n                                </td>\n                                <td>\n                                    <span class="status-badge \n                                        badge-completed\n                                        ">\n                                        \xe5\xb7\xb2\xe5\xae\x8c\xe6\x88\x90 / Completed\n                                    </span>\n                                </td>\n                                <td style="text-align: right;">\n                                    <a href="/reports/tasks/2/view/" class="btn btn-ghost" style="padding: 4px 8px; font-size: 12px;">\xe6\x9f\xa5\xe7\x9c\x8b</a>\n                                </td>\n                            </tr>\n                        \n                            <tr>\n                                <td>\n                                    <div style="display: flex; flex-direction: column; gap: 2px;">\n                                        <a href="/reports/tasks/1/view/" style="color: var(--text-main); font-weight: 500; text-decoration: none;">Task 1</a>\n                                        \n                                    </div>\n                                </td>\n                                <td>\n                                    \n                                        <div style="display: flex; align-items: center; gap: 8px;">\n                                            <div style="width: 24px; height: 24px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px;">\n                                                U\n                                            </div>\n                                            <span style="font-size: 13px;">user</span>\n                                        </div>\n                                    \n                                </td>\n                                <td>\n                                    --\n                                </td>\n                                <td>\n                                    <span class="status-badge \n                                        badge-default">\n                                        \xe6\x9c\xaa\xe5\xbc\x80\xe5\xa7\x8b / Pending\n                                    </span>\n                                </td>\n                                <td style="text-align: right;">\n                                    <a href="/reports/tasks/1/view/" class="btn btn-ghost" style="padding: 4px 8px; font-size: 12px;">\xe6\x9f\xa5\xe7\x9c\x8b</a>\n                                </td>\n                            </tr>\n                        \n                    </tbody>\n                </table>\n            </div>\n            \n            <!-- Pagination -->\n            \n        \n    </div>\n\n    <!-- Recent Reports -->\n    <div class="card">\n        <div class="card-header">\n            <div class="card-title"><span>\xf0\x9f\x93\xb0</span> \xe6\x9c\x80\xe8\xbf\x91\xe6\x97\xa5\xe6\x8a\xa5 / Recent Reports</div>\n        </div>\n        \n            <div style="text-align: center; padding: 32px; color: var(--text-secondary);">\xe6\x9a\x82\xe6\x97\xa0\xe6\x97\xa5\xe6\x8a\xa5\xe8\xae\xb0\xe5\xbd\x95</div>\n        \n    </div>\n\n</div>\n\n<script>\n    // Phase Update Logic\n    const updateBtn = document.getElementById(\'update-phase-btn\');\n    if (updateBtn) {\n        updateBtn.addEventListener(\'click\', function() {\n            const select = document.getElementById(\'phase-select\');\n            const phaseId = select.value;\n            const btn = this;\n            const msg = document.getElementById(\'update-msg\');\n            \n            if (!phaseId) return;\n            \n            if (!confirm(\'\xe7\xa1\xae\xe8\xae\xa4\xe5\x8f\x98\xe6\x9b\xb4\xe9\xa1\xb9\xe7\x9b\xae\xe9\x98\xb6\xe6\xae\xb5\xef\xbc\x9f\xe8\xbf\x99\xe5\xb0\x86\xe6\x9b\xb4\xe6\x96\xb0\xe9\xa1\xb9\xe7\x9b\xae\xe6\x95\xb4\xe4\xbd\x93\xe8\xbf\x9b\xe5\xba\xa6\xe3\x80\x82\')) return;\n            \n            btn.disabled = true;\n            btn.textContent = \'Updating...\';\n            \n            fetch("/reports/projects/1/update-phase/", {\n                method: \'POST\',\n                headers: {\n                    \'Content-Type\': \'application/x-www-form-urlencoded\',\n                    \'X-CSRFToken\': \'7wlLg6Z5SqirUOdK12w5CsGuRt7Dix7iAZSDsMwkYAN3adawm6bu4Ms8n4dSqYEA\'\n                },\n                body: \'phase_id=\' + phaseId\n            })\n            .then(response => response.json())\n            .then(data => {\n                btn.disabled = false;\n                btn.textContent = \'\xe6\x9b\xb4\xe6\x96\xb0 / Update\';\n                \n                if (data.status === \'success\') {\n                    msg.textContent = \'\xe6\x9b\xb4\xe6\x96\xb0\xe6\x88\x90\xe5\x8a\x9f\';\n                    msg.style.color = \'#166534\';\n                    setTimeout(() => window.location.reload(), 1000);\n                } else {\n                    msg.textContent = \'\xe6\x9b\xb4\xe6\x96\xb0\xe5\xa4\xb1\xe8\xb4\xa5\';\n                    msg.style.color = \'#991b1b\';\n                }\n            });\n        });\n    }\n</script>\n\n    </main>\n</div>\n</body>\n</html>'

----------------------------------------------------------------------
Ran 27 tests in 4.884s

FAILED (failures=2)
Destroying test database for alias 'default'...
Found 27 test(s).
System check identified no issues (0 silenced).
